<div #tableContainer class="tasks-table-container">
	<gantt-chart 
		[tasks]="tasks" 
		[teams]="teams">
	</gantt-chart>
	
	<table mat-table [dataSource]="tasks" class="mat-compact-table mat-mdc-table" matSort matSortDisableClear (matSortChange)="onSortChange($event)">
	
			<!-- ID -->
			<ng-container matColumnDef="id">
				<th mat-header-cell *matHeaderCellDef mat-sort-header class="centered"> ID </th>
				<td mat-cell *matCellDef="let task" class="centered"> {{ task.id }} </td>
			</ng-container>
	
			<!-- Name -->
			<ng-container matColumnDef="name">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
				<td mat-cell *matCellDef="let task"> {{ task.name }} </td>
			</ng-container>
	
			<!-- Team -->
			<ng-container matColumnDef="team">
				<th mat-header-cell *matHeaderCellDef> Team </th>
				<td mat-cell *matCellDef="let task"> {{ task.team_id }} </td>
			</ng-container>
	
			<!-- Person responsible -->
			<ng-container matColumnDef="person">
				<th mat-header-cell *matHeaderCellDef> Responsible </th>
				<td mat-cell *matCellDef="let task"> {{ task.person_name || 'Unassigned' }} </td>
			</ng-container>
	
			<!-- Start Date -->
			<ng-container matColumnDef="start_date">
				<th mat-header-cell *matHeaderCellDef mat-sort-header class="centered"> Start </th>
				<td mat-cell *matCellDef="let task" class="centered"> {{ task.start_date | date }} </td>
			</ng-container>
	
			<!-- End Date -->
			<ng-container matColumnDef="end_date">
				<th mat-header-cell *matHeaderCellDef mat-sort-header class="centered"> End </th>
				<td mat-cell *matCellDef="let task" class="centered"> {{ task.end_date ? (task.end_date | date) : 'â€“' }} </td>
			</ng-container>
	
			<!-- Header and Rows -->
			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"
					(click)="openDialog(row)"
					class="clickable-row"
					[attr.id]="'task-' + row.id">
			</tr>
	
		</table>
	
		<div #loadMore class="sentinel"></div>
	
		@if (loading) { 
			<div class="loading-wrapper">
				<mat-spinner [diameter]="24"></mat-spinner>
				<span>Loading more...</span>
			</div>
		}
	</div>
	